<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… | ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
<link rel="stylesheet" href="style.css">
<style>
/* CSS ÙØ±Ù… ÙˆØ±ÙˆØ¯/Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… */
.auth-container {
  max-width: 400px;
  margin: 40px auto;
  padding: 20px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.auth-tabs {
  display: flex;
  justify-content: space-around;
  margin-bottom: 20px;
}

.auth-tabs button {
  flex: 1;
  padding: 10px;
  border: none;
  background: #f1f1f1;
  cursor: pointer;
  font-weight: bold;
}

.auth-tabs button.active {
  background: #0d6efd;
  color: #fff;
  border-radius: 5px;
}

.auth-form input {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.auth-form button {
  width: 100%;
  padding: 10px;
  background: #0d6efd;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.auth-form button:hover {
  background: #0056b3;
}

.message {
  margin-top: 10px;
  font-weight: bold;
  text-align: center;
}
</style>
</head>
<body>

<header>
  <h1>ğŸ›ï¸ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†</h1>
  <nav>
    <a href="index.html">Ø®Ø§Ù†Ù‡</a>
    <a href="products.html">Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
    <a href="articles.html">Ù…Ù‚Ø§Ù„Ø§Øª</a>
    <a href="contact.html">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a>
    <a href="login.html" class="active">ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</a>
  </nav>
</header>

<main>
  <div class="auth-container">
    <div class="auth-tabs">
      <button id="login-tab" class="active">ÙˆØ±ÙˆØ¯</button>
      <button id="register-tab">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
    </div>

    <form id="login-form" class="auth-form">
      <input type="email" name="email" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø´Ù…Ø§" required>
      <input type="password" name="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" required>
      <button type="submit">ÙˆØ±ÙˆØ¯</button>
      <div class="message" id="login-message"></div>
    </form>

    <form id="register-form" class="auth-form" style="display:none;">
      <input type="text" name="name" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" required>
      <input type="email" name="email" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø´Ù…Ø§" required>
      <input type="password" name="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" required>
      <button type="submit">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
      <div class="message" id="register-message"></div>
    </form>
  </div>
</main>

<footer>
  <p>Â© 2025 ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ† | Ù…Ø¯ÛŒØ±ÛŒØª: Ø§Ø¨ÙˆØ§Ù„ÙØ¶Ù„ Ø¹Ù„ÛŒØ²Ø§Ø¯Ù‡</p>
</footer>

<script>
// ØªØ¨â€ŒÙ‡Ø§
const loginTab = document.getElementById('login-tab');
const registerTab = document.getElementById('register-tab');
const loginForm = document.getElementById('login-form');
const registerForm = document.getElementById('register-form');

loginTab.addEventListener('click', () => {
  loginTab.classList.add('active');
  registerTab.classList.remove('active');
  loginForm.style.display = 'block';
  registerForm.style.display = 'none';
});

registerTab.addEventListener('click', () => {
  registerTab.classList.add('active');
  loginTab.classList.remove('active');
  registerForm.style.display = 'block';
  loginForm.style.display = 'none';
});

// Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ ÙˆØ±ÙˆØ¯ Ø¨Ø§ fetch Ø¨Ù‡ users.json
const usersFile = 'users.json';

// Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
registerForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const name = registerForm.name.value.trim();
  const email = registerForm.email.value.trim();
  const password = registerForm.password.value;
  const msg = document.getElementById('register-message');

  try {
    let res = await fetch(usersFile);
    let users = await res.json();

    if(users.find(u => u.email === email)){
      msg.style.color = 'red';
      msg.textContent = 'Ø§ÛŒÙ† Ø§ÛŒÙ…ÛŒÙ„ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª!';
      return;
    }

    users.push({name, email, password});

    // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± ÛŒØ§ Ø°Ø®ÛŒØ±Ù‡ ÙØ§ÛŒÙ„ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¯Ø§Ø±Ø¯
    msg.style.color = 'green';
    msg.textContent = 'Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!';
    registerForm.reset();
  } catch(err) {
    console.error(err);
    msg.style.color = 'red';
    msg.textContent = 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±!';
  }
});

// ÙˆØ±ÙˆØ¯
loginForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const email = loginForm.email.value.trim();
  const password = loginForm.password.value;
  const msg = document.getElementById('login-message');

  try {
    let res = await fetch(usersFile);
    let users = await res.json();

    const user = users.find(u => u.email === email && u.password === password);

    if(user){
      msg.style.color = 'green';
      msg.textContent = `Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ØŒ ${user.name}!`;
      loginForm.reset();
    } else {
      msg.style.color = 'red';
      msg.textContent = 'Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!';
    }
  } catch(err) {
    console.error(err);
    msg.style.color = 'red';
    msg.textContent = 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±!';
  }
});
</script>

</body>
</html>